<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="/iro.min.js"></script>
</head>
<body>
  <section class="customColor">
    <div class="wheel">
      <div id="colorWheel"></div>
      <button id="setColorButton">Set Color</button>
    </div>
  </section>
  
  <script>
    // Initialize the color wheel
    var colorWheel = new iro.ColorPicker("#colorWheel", {
      color: "#ff0000",
      width: 650,
      display: 'block',
      layout: [{ component: iro.ui.Wheel }]
    });

    // Handle color change event
    colorWheel.on('color:change', function(color) {
      // Change the background color of the wheel section
      document.querySelector('.wheel').style.backgroundColor = color.hexString;
    });

    // Handle set color button click
    document.getElementById('setColorButton').addEventListener('click', function() {
      var color = colorWheel.color.hexString.substring(1);
      fetch("/color", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: "value=" + color
      })
      .then(response => {
        if (!response.ok) {
          throw new Error("Network response was not ok");
        }
        return response.text();
      })
      .then(data => console.log(data))
      .catch(error => console.error("Fetch error:", error));
    });

    // Function to start animation
    function startAnimation(animationIndex) {
      fetch(`/animation?a=${animationIndex}`)
        .then(response => response.text())
        .then(data => console.log(data));
    }
  </script>
  <section class="animations">
    <h1>Animations</h1>
    <section class="buttons">
      <button onclick="startAnimation(0)">Rainbow Wave</button>
      <button onclick="startAnimation(1)">Confetti</button>
      <button onclick="startAnimation(2)">Sinelon</button>
      <button onclick="startAnimation(3)">BPM</button>
      <button onclick="startAnimation(4)">Juggle</button>
    </section>
  </section>
</body>
</html>
